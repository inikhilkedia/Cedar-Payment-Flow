(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[137],{9608:function(e,a,t){"use strict";let l=(0,t(2265).createContext)({stage:"welcome",setStage:()=>{},amount:600,setAmount:()=>{},cardNumber:void 0,setCardNumber:()=>{},expiry:void 0,setExpiry:()=>{},cvv:void 0,setCvv:()=>{},name:void 0,setName:()=>{},zip:void 0,setZip:()=>{},editing:!1,setEditing:()=>{},error:{},setError:()=>{}});a.Z=l},2137:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return f}});var l=t(7437),s=t(2265),r=t(9286),n=t.n(r);let i={cardNumber:"Invalid card number.",expiry:"Invalid expiry date.",cvv:"Invalid CVV.",zip:"Invalid ZIP code."};var c=e=>{let{type:a,id:t}=e;return(0,l.jsxs)("span",{className:"mt-2 block text-custom-error-red",children:["invalid"===a&&i[t],"empty"===a&&"This field is required."]})},o=t(6648);let d={visa:"/cedar-payment-flow/visa.svg",mastercard:"/cedar-payment-flow/mastercard.svg",amex:"/cedar-payment-flow/amex.svg",discover:"/cedar-payment-flow/discover.svg"},m={error:(0,l.jsx)("span",{className:"icon-wrapper",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6 text-custom-error-red",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})})}),success:(0,l.jsx)("span",{className:"icon-wrapper success",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6 text-custom-success-green",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"})})})},u=(0,l.jsx)("span",{className:"text-custom-dark",children:(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"size-6",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})})});var x=e=>{let{type:a,cardType:t}=e;return"card"===a?t?(0,l.jsx)(o.default,{src:d[t],alt:"".concat(t," icon"),className:"h-8 w-8",width:10,height:10}):u:m[a]||null};let p=e=>{let a={visa:/^4[0-9]{12}(?:[0-9]{3})?$/,mastercard:/^5[1-5][0-9]{14}$/,amex:/^3[47][0-9]{13}$/,discover:/^6(?:011|5[0-9]{2})[0-9]{12}$/};for(let t in a)if(a[t].test(e))return t;return""};var v=e=>{let{id:a,classes:t="",label:s,value:r,onChange:n,onKeyDown:i,error:o,ariaLabel:d,validationFunc:m}=e;return(0,l.jsxs)("div",{className:"form-group ".concat(t),children:[(0,l.jsx)("label",{htmlFor:a,className:"mb-1 block font-bold text-gray-700 max-[385px]:text-sm",children:s}),(0,l.jsxs)("div",{className:"relative flex items-center",children:["cardNumber"===a&&(0,l.jsx)("span",{className:"absolute left-3 flex items-center",children:(0,l.jsx)(x,{type:"card",cardType:null==p?void 0:p(null!=r?r:"")})}),(0,l.jsx)("input",{type:"text",id:a,value:r,onChange:n,onKeyDown:i,className:"w-full rounded border px-3 py-2 text-custom-dark ".concat(o?"border-custom-error-red":"border-custom-medium-gray"," ").concat("cardNumber"===a?"pl-12":""," pr-10"),"aria-label":d}),(0,l.jsx)("span",{className:"absolute right-3 flex items-center",children:o?(0,l.jsx)(x,{type:"error"}):m(r)?(0,l.jsx)(x,{type:"success"}):null})]}),r.length>0&&o?(0,l.jsx)(c,{type:"invalid",id:a}):0===r.length&&o?(0,l.jsx)(c,{type:"empty",id:a}):null]})},h=t(9608),g=e=>{var a,t,r,i,c;let{classes:o}=e,d=(0,s.useContext)(h.Z),m=d.error,{cardNumber:u,setCardNumber:x,expiry:p,setExpiry:g,cvv:b,setCvv:y,name:f,setName:j,zip:N,setZip:w,setEditing:k,setError:C}=d,L={cardNumber:n().isCreditCard,expiry:e=>{let[a,t]=e.split("/").map(e=>e.trim());if(a&&t&&n().isInt(a,{min:1,max:12})&&n().isInt(t,{min:0})){let e=new Date().getFullYear()%100,l=new Date().getMonth()+1,s=parseInt(t,10),r=parseInt(a,10);return s>e||s===e&&r>=l}return!1},cvv:e=>n().isLength(e,{min:3,max:4})&&n().isNumeric(e),name:e=>n().isAlpha(e.replace(/ /g,"")),zip:e=>n().isPostalCode(e,"US")},z=(e,a)=>{let t=a;"expiry"===e&&2===a.length&&(t=a+"/"),({cardNumber:x,expiry:g,cvv:y,name:j,zip:w})[e](t);let l=!L[e](t);C(a=>({...a,[e]:l}))};return(0,l.jsxs)("form",{id:"PaymentForm",onSubmit:e=>{e.preventDefault();let a={};Object.keys(L).forEach(e=>{L[e](d[e])||(a[e]=!0)}),0===Object.keys(a).length?(C({}),null==k||k(!1)):C(a)},className:"space-y-4 ".concat(o),children:[(0,l.jsx)(v,{id:"cardNumber",label:"Card number",value:null!=u?u:"",onChange:e=>z("cardNumber",e.target.value),error:null!==(a=m.cardNumber)&&void 0!==a&&a,ariaLabel:"Card number",validationFunc:L.cardNumber}),(0,l.jsxs)("div",{className:"flex space-x-4",children:[(0,l.jsx)(v,{id:"expiry",classes:"flex-1",label:"Expires (MM/YY)",value:null!=p?p:"",onChange:e=>z("expiry",e.target.value),onKeyDown:e=>{let a=e.target;("Backspace"===e.key||"Delete"===e.key)&&3===a.selectionStart&&"/"===a.value[2]&&(e.preventDefault(),g(a.value.slice(0,2)))},error:null!==(t=m.expiry)&&void 0!==t&&t,ariaLabel:"Expiration date",validationFunc:L.expiry}),(0,l.jsx)(v,{id:"cvv",classes:"flex-1",label:"Security code (CVV)",value:null!=b?b:"",onChange:e=>z("cvv",e.target.value),error:null!==(r=m.cvv)&&void 0!==r&&r,ariaLabel:"CVV",validationFunc:L.cvv})]}),(0,l.jsx)(v,{id:"name",label:"Name on card",value:null!=f?f:"",onChange:e=>z("name",e.target.value),error:null!==(i=m.name)&&void 0!==i&&i,ariaLabel:"Name on card",validationFunc:L.name}),(0,l.jsx)(v,{id:"zip",label:"Zip code",value:null!=N?N:"",onChange:e=>z("zip",e.target.value),error:null!==(c=m.zip)&&void 0!==c&&c,ariaLabel:"Zip code",validationFunc:L.zip}),(0,l.jsx)("button",{type:"submit",className:"mt-8 w-full rounded-lg bg-blue-600 px-4 py-2 text-white",children:"Continue"})]})},b=t(482),y=t.n(b);function f(){let{amount:e,cardNumber:a,editing:t,setEditing:r,setStage:n}=(0,s.useContext)(h.Z)||{},[i,c]=(0,s.useState)(t?y().expand:y().collapse),[o,d]=(0,s.useState)(t?y().collapse:y().expand);return(0,s.useEffect)(()=>{t?(c(y().expand),d(y().collapse)):(c(y().collapse),d(y().expand))},[t]),(0,l.jsxs)("div",{className:"mx-auto flex min-h-screen w-full max-w-full flex-col rounded-lg bg-white p-8 text-left shadow-lg max-[1023px]:mx-0 max-[768px]:px-4 lg:my-10 lg:max-w-md",children:[(0,l.jsxs)("section",{id:"step1",className:"".concat(t?"mb-6":"mb-3"),children:[(0,l.jsxs)("header",{className:"flex items-center ".concat(t?"mb-6":"mb-0"),children:[(0,l.jsx)("p",{className:"mr-2 inline-block rounded-full px-2 ".concat(t?"bg-blue-600 text-white":"bg-custom-light-gray text-gray-500"),children:"1"}),(0,l.jsx)("p",{className:"grow text-xl font-bold text-custom-dark",children:"Payment information"}),!t&&(0,l.jsx)("p",{className:"ml-4 text-lg font-bold text-blue-600 cursor-pointer",onClick:()=>null==r?void 0:r(!0),children:"Edit"})]}),t&&(0,l.jsx)(g,{classes:i})]}),(0,l.jsxs)("section",{id:"step2",className:"mt-3 border-t pt-5",children:[(0,l.jsxs)("header",{className:"flex items-center",children:[(0,l.jsx)("p",{className:"mr-2 inline-block rounded-full px-2 ".concat(t?"bg-custom-light-gray text-gray-500":"bg-blue-600 text-white"),children:"2"}),(0,l.jsx)("span",{className:"".concat(t?"text-gray-500":"text-xl font-bold text-custom-dark"),children:"Review and pay"})]}),!t&&(0,l.jsxs)("div",{className:o,children:[(0,l.jsxs)("p",{className:"my-6 text-xl text-custom-dark",children:["You're about to make a payment of"," ",(0,l.jsxs)("span",{className:"font-bold",children:["$",e]})]}),(0,l.jsx)("h3",{className:"text-lg font-bold text-custom-gray",children:"Payment method"}),(0,l.jsxs)("div",{className:"my-4 flex items-center justify-start gap-2",children:[(0,l.jsx)(x,{type:"card",cardType:null==p?void 0:p(null!=a?a:"")}),(0,l.jsxs)("span",{className:"card-details text-custom-dark",children:["Card ending in ••••",null==a?void 0:a.slice(-4)]})]}),(0,l.jsxs)("button",{className:"m-auto mt-6 w-full rounded-lg bg-blue-600 px-4 py-2 text-white",onClick:()=>null==n?void 0:n("thankyou"),children:["Pay $",e]})]})]})]})}},482:function(e){e.exports={expand:"PayAndReview_expand__eiQXq",collapse:"PayAndReview_collapse__jiIcy"}}}]);